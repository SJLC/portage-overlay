--- src/mesa/main/texformat.c.orig	2012-08-14 10:54:39.000000000 -0700
+++ src/mesa/main/texformat.c	2012-10-30 22:14:10.000000000 -0700
@@ -103,7 +103,7 @@
       case GL_RGBA12:
       case GL_RGBA16:
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_16);
-	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_16);
+	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_16_REV);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA8888);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_ARGB8888);
 	 break;
@@ -137,6 +137,7 @@
       case GL_RGB12:
       case GL_RGB16:
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_16);
+	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_16_REV);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_XRGB8888);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_ARGB8888);
 	 break;
@@ -151,6 +152,7 @@
       case GL_ALPHA12:
       case GL_ALPHA16:
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_A16);
+	 RETURN_IF_SUPPORTED(MESA_FORMAT_A16_REV);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_A8);
 	 break;
 
@@ -165,6 +167,7 @@
       case GL_LUMINANCE12:
       case GL_LUMINANCE16:
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_L16);
+	 RETURN_IF_SUPPORTED(MESA_FORMAT_L16_REV);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_L8);
 	 break;
 
@@ -197,6 +200,7 @@
       case GL_INTENSITY12:
       case GL_INTENSITY16:
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_I16);
+	 RETURN_IF_SUPPORTED(MESA_FORMAT_I16_REV);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_I8);
 	 break;
 
@@ -215,6 +219,7 @@
 	    break;
          case GL_DEPTH_COMPONENT16:
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_Z16);
+	    RETURN_IF_SUPPORTED(MESA_FORMAT_Z16_REV);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_X8_Z24);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_S8_Z24);
          default:
@@ -335,10 +340,12 @@
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_ALPHA_FLOAT32);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT16);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32);
+	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32_REV);
 	    break;
          case GL_ALPHA32F_ARB:
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_ALPHA_FLOAT32);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32);
+	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32_REV);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_ALPHA_FLOAT16);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT16);
 	    break;
@@ -347,10 +354,12 @@
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_LUMINANCE_FLOAT32);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT16);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32);
+	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32_REV);
 	    break;
          case GL_LUMINANCE32F_ARB:
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_LUMINANCE_FLOAT32);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32);
+	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32_REV);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_LUMINANCE_FLOAT16);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT16);
 	    break;
@@ -359,10 +368,12 @@
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_LUMINANCE_ALPHA_FLOAT32);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT16);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32);
+	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32_REV);
 	    break;
          case GL_LUMINANCE_ALPHA32F_ARB:
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_LUMINANCE_ALPHA_FLOAT32);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32);
+	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32_REV);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_LUMINANCE_ALPHA_FLOAT16);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT16);
 	    break;
@@ -371,10 +382,12 @@
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_INTENSITY_FLOAT32);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT16);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32);
+	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32_REV);
 	    break;
          case GL_INTENSITY32F_ARB:
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_INTENSITY_FLOAT32);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32);
+	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32_REV);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_INTENSITY_FLOAT16);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT16);
 	    break;
@@ -383,19 +396,23 @@
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT16);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGB_FLOAT32);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32);
+	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32_REV);
 	    break;
          case GL_RGB32F_ARB:
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGB_FLOAT32);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32);
+	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32_REV);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGB_FLOAT16);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT16);
 	    break;
          case GL_RGBA16F_ARB:
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT16);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32);
+	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32_REV);
 	    break;
          case GL_RGBA32F_ARB:
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32);
+	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32_REV);
 	    RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT16);
 	    break;
          default:
@@ -781,16 +798,19 @@
 
       case GL_R16:
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_R16);
+	 RETURN_IF_SUPPORTED(MESA_FORMAT_R16_REV);
 	 break;
 
       case GL_RG:
       case GL_RG8:
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_GR88);
+	 RETURN_IF_SUPPORTED(MESA_FORMAT_RG88);
 	 break;
 
       case GL_COMPRESSED_RG:
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RG_RGTC2);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_GR88);
+	 RETURN_IF_SUPPORTED(MESA_FORMAT_RG88);
 	 break;
 
       case GL_RG16:
@@ -811,11 +831,13 @@
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RG_FLOAT32);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT16);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32);
+	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32_REV);
 	 break;
       case GL_R32F:
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_R_FLOAT32);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RG_FLOAT32);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32);
+	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32_REV);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_R_FLOAT16);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RG_FLOAT16);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT16);
@@ -825,10 +847,12 @@
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RG_FLOAT32);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT16);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32);
+	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32_REV);
 	 break;
       case GL_RG32F:
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RG_FLOAT32);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32);
+	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT32_REV);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RG_FLOAT16);
 	 RETURN_IF_SUPPORTED(MESA_FORMAT_RGBA_FLOAT16);
 	 break;
